/**
* @preserve
* https://github.com/GregBee2/xassist-aggregator.git Version 0.0.1.
*  Copyright 2018 Gregory Beirens.
*  Created on Thu, 12 Apr 2018 11:58:29 GMT.
*/
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.xa=n.xa||{})}(this,function(n){"use strict";function s(n,e,t,r){this.addFn=n||function(n){return++n},this.removeFn=e||function(n){return--n},this.initialFn=t||function(){return 0},this.getValue=r||function(){return this.value},this.reset()}function r(n,e){var t=e-n.mean;return n.sum+=e,n.len++,n.mean+=t/n.len,n.s+=t*(e-n.mean),n}function a(n,e){var t=n.seen.get(e);return void 0!==t?n.result[t][1]++:n.seen.set(e,n.result.push([e,1])-1),n}function f(t,n){var r=t.seen.get(n);return void 0!==r&&(t.result[r][1]--,t.result[r][1]<1&&(t.seen.delete(n),t.result.splice(r,1),t.seen.forEach(function(n,e){r<=n&&t.seen.set(e,n-1)}))),t}function c(){return{seen:new Map,result:[]}}function e(n,e,t,r){return new s(n,e,t,r)}s.prototype.add=function(n){return this.value=this.addFn(this.value,n),this},s.prototype.remove=function(n){return this.value=this.removeFn(this.value,n),this},s.prototype.reset=function(){return this.value=this.initialFn(),this},s.prototype.addArray=function(n){for(var e=0,t=n.length;e<t;e++)this.add(n[e]);return this},s.prototype.removeArray=function(n){for(var e=0,t=n.length;e<t;e++)this.remove(n[e]);return this};var t=e;t.create=e,t.count=function(){return new s},t.countUnique=function(t){var n,e;return t?(n=function(n,e){return a(n,e[t])},e=function(n,e){return f(n,e[t])}):(n=a,e=f),new s(n,e,c,function(){return this.value.result.length})},t.listValues=function(t,n){var e,r,u=", ",i="[[undefined]]",o="[[empty]]";return 0===arguments.length||"object"==typeof t?(e=a,r=f,n="object"==typeof t?t:{}):(e=function(n,e){return a(n,e[t])},r=function(n,e){return f(n,e[t])},n=n||{}),u=n.seperator||u,i=n.undefinedValue||i,o=n.emptyValue||o,new s(e,r,c,function(){return this.value.result.map(function(n){return void 0===n[0]?i:""===n[0]?o:n[0]}).join(u)})},t.sum=function(t){var n,e;return t?(n=function(n,e){return n+(+e[t]||0)},e=function(n,e){return n-(+e[t]||0)}):(n=function(n,e){return n+(+e||0)},e=function(n,e){return n-(+e||0)}),new s(n,e)},t.average=function(t){var n,e;return t?(n=function(n,e){return{sum:n.sum+(+e[t]||0),len:++n.len}},e=function(n,e){return{sum:n.sum-(+e[t]||0),len:--n.len}}):(n=function(n,e){return{sum:n.sum+(+e||0),len:++n.len}},e=function(n,e){return{sum:n.sum-(+e||0),len:--n.len}}),new s(n,e,function(){return{sum:0,len:0}},function(){return this.value.sum/this.value.len})},t.standardDeviation=function(t){return new s(t?function(n,e){return r(n,+e[t]||0)}:function(n,e){return r(n,+e||0)},function(){throw new Error("not yet implemented")},function(){return{sum:0,len:0,mean:0,s:0}},function(){return n=this.value,e=n.len,t=n.mean,u=n.s/(e-1),{standardDeviation:r=Math.sqrt(u),average:t,length:e,variance:u,standardError:r/Math.sqrt(e),sum:n.sum};var n,e,t,r,u})},n.aggregate=t,Object.defineProperty(n,"__esModule",{value:!0})});